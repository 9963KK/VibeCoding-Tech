# Vibe è´¨é‡é—¨ç¦æ ‡å‡†

## ğŸ¯ è´¨é‡ç†å¿µ

**å·¦ç§»æµ‹è¯• (Shift Left)**: è¶Šæ—©å‘ç°é—®é¢˜ï¼Œä¿®å¤æˆæœ¬è¶Šä½
**è‡ªåŠ¨åŒ–ä¼˜å…ˆ**: èƒ½è‡ªåŠ¨æ£€æŸ¥çš„ç»ä¸ä¾èµ–äººå·¥
**å¿«é€Ÿåé¦ˆ**: é—®é¢˜å‘ç°åç«‹å³é€šçŸ¥ï¼Œä¸è¿‡å¤œ

---

## ğŸ“Š è´¨é‡æŒ‡æ ‡ä½“ç³»

### ä»£ç è´¨é‡æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è­¦å‘Šé˜ˆå€¼ | é˜»æ–­é˜ˆå€¼ | æ£€æŸ¥å·¥å…· |
|------|--------|---------|---------|---------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | â‰¥80% | <70% | <60% | Jest/Pytest |
| ä»£ç é‡å¤ç‡ | â‰¤5% | 5-10% | >10% | jscpd/SonarQube |
| åœˆå¤æ‚åº¦ | â‰¤10 | 10-15 | >15 | ESLint/Pylint |
| å‡½æ•°è¡Œæ•° | â‰¤50è¡Œ | 50-100è¡Œ | >100è¡Œ | ESLint/Pylint |
| ç±»è¡Œæ•° | â‰¤300è¡Œ | 300-500è¡Œ | >500è¡Œ | ESLint/Pylint |
| æŠ€æœ¯å€ºåŠ¡æ¯”ç‡ | <5% | 5-10% | >10% | SonarQube |

### æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è­¦å‘Šé˜ˆå€¼ | é˜»æ–­é˜ˆå€¼ | æ£€æŸ¥å·¥å…· |
|------|--------|---------|---------|---------|
| APIå¹³å‡å“åº”æ—¶é—´ | <200ms | 200-500ms | >500ms | k6/Lighthouse |
| API P95å“åº”æ—¶é—´ | <500ms | 500-1000ms | >1000ms | k6 |
| é¦–å±åŠ è½½æ—¶é—´ | <2s | 2-3s | >3s | Lighthouse |
| åŒ…ä½“ç§¯ | <500KB | 500KB-1MB | >1MB | webpack-bundle-analyzer |

### å®‰å…¨æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è­¦å‘Šé˜ˆå€¼ | é˜»æ–­é˜ˆå€¼ | æ£€æŸ¥å·¥å…· |
|------|--------|---------|---------|---------|
| é«˜å±æ¼æ´ | 0 | 0 | >0 | npm audit/Snyk |
| ä¸­å±æ¼æ´ | 0 | 0-5 | >5 | npm audit/Snyk |
| æ•æ„Ÿä¿¡æ¯æ³„éœ² | 0 | 0 | >0 | git-secrets/truffleHog |
| OWASP Top 10 | 0 | 0 | >0 | SonarQube |

---

## ğŸšª å„é˜¶æ®µè´¨é‡é—¨ç¦

### é—¨ç¦1: æœ¬åœ°å¼€å‘é˜¶æ®µ

#### è§¦å‘æ—¶æœº
- Git commitå‰ (Pre-commit hook)
- å¼€å‘è€…æ‰‹åŠ¨è¿è¡Œ

#### æ£€æŸ¥é¡¹
```bash
#!/bin/bash
# æœ¬åœ°è´¨é‡æ£€æŸ¥è„šæœ¬

echo "ğŸ” å¼€å§‹æœ¬åœ°è´¨é‡æ£€æŸ¥..."

# 1. ä»£ç æ ¼å¼åŒ–æ£€æŸ¥
echo "1ï¸âƒ£ æ£€æŸ¥ä»£ç æ ¼å¼..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ä»£ç æ ¼å¼æ£€æŸ¥å¤±è´¥ï¼Œè¯·è¿è¡Œ npm run lint:fix"
  exit 1
fi

# 2. ç±»å‹æ£€æŸ¥
echo "2ï¸âƒ£ æ£€æŸ¥ç±»å‹..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ ç±»å‹æ£€æŸ¥å¤±è´¥"
  exit 1
fi

# 3. å•å…ƒæµ‹è¯•
echo "3ï¸âƒ£ è¿è¡Œå•å…ƒæµ‹è¯•..."
npm run test:unit
if [ $? -ne 0 ]; then
  echo "âŒ å•å…ƒæµ‹è¯•å¤±è´¥"
  exit 1
fi

# 4. æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥
echo "4ï¸âƒ£ æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡..."
COVERAGE=$(npm run test:coverage --silent | grep "All files" | awk '{print $10}' | sed 's/%//')
if [ "$COVERAGE" -lt 60 ]; then
  echo "âŒ æµ‹è¯•è¦†ç›–ç‡ ${COVERAGE}% ä½äºé˜»æ–­é˜ˆå€¼ 60%"
  exit 1
elif [ "$COVERAGE" -lt 70 ]; then
  echo "âš ï¸  æµ‹è¯•è¦†ç›–ç‡ ${COVERAGE}% ä½äºç›®æ ‡å€¼ 70%ï¼Œå»ºè®®è¡¥å……æµ‹è¯•"
fi

# 5. æ£€æŸ¥æ˜¯å¦æœ‰console.logæ®‹ç•™
echo "5ï¸âƒ£ æ£€æŸ¥è°ƒè¯•ä»£ç ..."
if git diff --cached | grep -E "console\.(log|debug|info)" > /dev/null; then
  echo "âš ï¸  æ£€æµ‹åˆ° console.logï¼Œè¯·ç¡®è®¤æ˜¯å¦éœ€è¦ç§»é™¤"
  read -p "æ˜¯å¦ç»§ç»­? (y/n) " -n 1 -r
  echo
  if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    exit 1
  fi
fi

# 6. æ£€æŸ¥TODO/FIXME
echo "6ï¸âƒ£ æ£€æŸ¥æœªå®Œæˆé¡¹..."
TODO_COUNT=$(git diff --cached | grep -E "TODO|FIXME" | wc -l)
if [ "$TODO_COUNT" -gt 0 ]; then
  echo "âš ï¸  å‘ç° ${TODO_COUNT} ä¸ª TODO/FIXME"
  git diff --cached | grep -E "TODO|FIXME"
  echo ""
  read -p "æ˜¯å¦ç»§ç»­? (y/n) " -n 1 -r
  echo
  if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    exit 1
  fi
fi

echo "âœ… æœ¬åœ°è´¨é‡æ£€æŸ¥é€šè¿‡"
```

#### é—¨ç¦è§„åˆ™
| æ£€æŸ¥é¡¹ | ä¸é€šè¿‡è¡Œä¸º |
|--------|-----------|
| ä»£ç æ ¼å¼ | âŒ é˜»æ–­æäº¤ |
| ç±»å‹æ£€æŸ¥ | âŒ é˜»æ–­æäº¤ |
| å•å…ƒæµ‹è¯• | âŒ é˜»æ–­æäº¤ |
| è¦†ç›–ç‡<60% | âŒ é˜»æ–­æäº¤ |
| è¦†ç›–ç‡60-70% | âš ï¸ è­¦å‘Šä½†å…è®¸ |
| console.log | âš ï¸ è­¦å‘Šä½†å…è®¸ |
| TODO/FIXME | âš ï¸ è­¦å‘Šä½†å…è®¸ |

---

### é—¨ç¦2: PRåˆ›å»ºé˜¶æ®µ

#### è§¦å‘æ—¶æœº
- PRåˆ›å»ºæ—¶
- PRæ›´æ–°æ—¶ï¼ˆæ–°æäº¤æ¨é€ï¼‰

#### æ£€æŸ¥é¡¹

**CI Pipelineé…ç½®**:
```yaml
# .github/workflows/pr-quality-gate.yml
name: PR Quality Gate

on:
  pull_request:
    branches: [main, develop]

jobs:
  code-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # ç”¨äºSonarQubeåˆ†æ

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Lintæ£€æŸ¥
        run: npm run lint

      - name: ç±»å‹æ£€æŸ¥
        run: npm run type-check

      - name: å•å…ƒæµ‹è¯•
        run: npm run test:unit

      - name: æµ‹è¯•è¦†ç›–ç‡
        run: npm run test:coverage
        continue-on-error: false

      - name: ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/coverage-final.json

      - name: ä»£ç è´¨é‡åˆ†æ
        uses: sonarsource/sonarqube-scan-action@master
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
          SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}

      - name: è´¨é‡é—¨ç¦æ£€æŸ¥
        uses: sonarsource/sonarqube-quality-gate-action@master
        timeout-minutes: 5
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}

  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: ä¾èµ–å®‰å…¨æ‰«æ
        run: npm audit --audit-level=moderate
        continue-on-error: false

      - name: Snykå®‰å…¨æ‰«æ
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high

      - name: æ•æ„Ÿä¿¡æ¯æ‰«æ
        uses: trufflesecurity/trufflehog@main
        with:
          path: ./
          base: ${{ github.event.repository.default_branch }}
          head: HEAD

  build-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: æ„å»ºæ£€æŸ¥
        run: npm run build

      - name: åŒ…ä½“ç§¯åˆ†æ
        run: |
          npm run build:analyze
          SIZE=$(du -sh dist | awk '{print $1}')
          echo "æ„å»ºäº§ç‰©å¤§å°: $SIZE"

  integration-test:
    runs-on: ubuntu-latest
    needs: [code-quality, build-test]
    steps:
      - uses: actions/checkout@v3

      - name: å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
        run: docker-compose up -d

      - name: è¿è¡Œé›†æˆæµ‹è¯•
        run: npm run test:integration

      - name: åœæ­¢æµ‹è¯•ç¯å¢ƒ
        run: docker-compose down

  e2e-test:
    runs-on: ubuntu-latest
    needs: [integration-test]
    steps:
      - uses: actions/checkout@v3

      - name: è¿è¡ŒE2Eæµ‹è¯•
        run: npm run test:e2e

      - name: ä¸Šä¼ æµ‹è¯•æˆªå›¾
        if: failure()
        uses: actions/upload-artifact@v3
        with:
          name: e2e-screenshots
          path: tests/e2e/screenshots/

  doc-sync-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: æ–‡æ¡£åŒæ­¥æ£€æŸ¥
        run: ./scripts/check-doc-sync.sh

  pr-size-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: PRå¤§å°æ£€æŸ¥
        run: |
          CHANGED_LINES=$(git diff --shortstat origin/main...HEAD | awk '{print $4+$6}')
          echo "å˜æ›´è¡Œæ•°: $CHANGED_LINES"
          if [ "$CHANGED_LINES" -gt 1000 ]; then
            echo "::warning::PRå˜æ›´è¶…è¿‡1000è¡Œï¼Œå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå°PR"
          fi

  all-checks-passed:
    runs-on: ubuntu-latest
    needs: [code-quality, security-scan, build-test, integration-test, e2e-test, doc-sync-check]
    steps:
      - name: æ‰€æœ‰æ£€æŸ¥é€šè¿‡
        run: echo "âœ… æ‰€æœ‰è´¨é‡é—¨ç¦æ£€æŸ¥é€šè¿‡"
```

#### é—¨ç¦è§„åˆ™
| æ£€æŸ¥é¡¹ | ä¸é€šè¿‡è¡Œä¸º |
|--------|-----------|
| Lintæ£€æŸ¥å¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| ç±»å‹æ£€æŸ¥å¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| å•å…ƒæµ‹è¯•å¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| è¦†ç›–ç‡<60% | âŒ é˜»æ–­åˆå¹¶ |
| SonarQubeè´¨é‡é—¨ç¦ | âŒ é˜»æ–­åˆå¹¶ |
| é«˜å±å®‰å…¨æ¼æ´ | âŒ é˜»æ–­åˆå¹¶ |
| ä¸­å±æ¼æ´>5ä¸ª | âŒ é˜»æ–­åˆå¹¶ |
| æ•æ„Ÿä¿¡æ¯æ³„éœ² | âŒ é˜»æ–­åˆå¹¶ |
| æ„å»ºå¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| é›†æˆæµ‹è¯•å¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| E2Eæµ‹è¯•å¤±è´¥ | âŒ é˜»æ–­åˆå¹¶ |
| æ–‡æ¡£æœªåŒæ­¥ | âŒ é˜»æ–­åˆå¹¶ |
| PR>1000è¡Œ | âš ï¸ è­¦å‘Šä½†å…è®¸ |

---

### é—¨ç¦3: ä»£ç å®¡æŸ¥é˜¶æ®µ

#### è§¦å‘æ—¶æœº
- PRå®¡æŸ¥æ—¶
- äººå·¥Review

#### æ£€æŸ¥æ¸…å•

**æ¶æ„å±‚é¢**:
- [ ] âœ… ç¬¦åˆæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡
- [ ] âœ… éµå¾ªSOLIDåŸåˆ™
  - [ ] å•ä¸€èŒè´£ï¼šæ¯ä¸ªç±»/å‡½æ•°èŒè´£å•ä¸€
  - [ ] å¼€é—­åŸåˆ™ï¼šæ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å°é—­
  - [ ] é‡Œæ°æ›¿æ¢ï¼šå­ç±»å¯æ›¿æ¢çˆ¶ç±»
  - [ ] æ¥å£éš”ç¦»ï¼šæ¥å£ç»†ç²’åº¦
  - [ ] ä¾èµ–å€’ç½®ï¼šä¾èµ–æŠ½è±¡ä¸ä¾èµ–å…·ä½“
- [ ] âœ… æ¨¡å—è¾¹ç•Œæ¸…æ™°
- [ ] âœ… ä¾èµ–å…³ç³»åˆç†

**ä»£ç å±‚é¢**:
- [ ] âœ… æ— é‡å¤ä»£ç  (DRY)
- [ ] âœ… é€»è¾‘ç®€æ´ (KISS)
- [ ] âœ… æ— è¿‡åº¦è®¾è®¡ (YAGNI)
- [ ] âœ… å‘½åæ¸…æ™°è¡¨è¾¾æ„å›¾
- [ ] âœ… å‡½æ•°é•¿åº¦åˆç† (<50è¡Œ)
- [ ] âœ… ç±»å¤§å°åˆç† (<300è¡Œ)
- [ ] âœ… åµŒå¥—å±‚çº§åˆç† (<3å±‚)
- [ ] âœ… é­”æ³•æ•°å­—å·²æå–ä¸ºå¸¸é‡
- [ ] âœ… å¼‚å¸¸å¤„ç†é€‚å½“
- [ ] âœ… æ—¥å¿—è®°å½•é€‚å½“

**å®‰å…¨å±‚é¢**:
- [ ] âœ… æ— SQLæ³¨å…¥é£é™©
- [ ] âœ… æ— XSSé£é™©
- [ ] âœ… æ— CSRFé£é™©
- [ ] âœ… æ•æ„Ÿæ•°æ®å·²åŠ å¯†
- [ ] âœ… ç”¨æˆ·è¾“å…¥å·²éªŒè¯
- [ ] âœ… è®¤è¯æˆæƒæ­£ç¡®
- [ ] âœ… å¯†é’¥æœªç¡¬ç¼–ç 

**æ€§èƒ½å±‚é¢**:
- [ ] âœ… æ— N+1æŸ¥è¯¢
- [ ] âœ… æ— ä¸å¿…è¦çš„å¾ªç¯åµŒå¥—
- [ ] âœ… å¤§æ•°æ®é›†å·²åˆ†é¡µ
- [ ] âœ… æ— å†…å­˜æ³„æ¼é£é™©
- [ ] âœ… æ•°æ®åº“ç´¢å¼•åˆç†

**æµ‹è¯•å±‚é¢**:
- [ ] âœ… è¦†ç›–ç‡è¾¾æ ‡ (â‰¥80%)
- [ ] âœ… æµ‹è¯•äº†è¾¹ç•Œæ¡ä»¶
- [ ] âœ… æµ‹è¯•äº†å¼‚å¸¸æƒ…å†µ
- [ ] âœ… æµ‹è¯•ç‹¬ç«‹å¯é‡å¤
- [ ] âœ… Mockä½¿ç”¨åˆç†
- [ ] âœ… é›†æˆæµ‹è¯•è¦†ç›–å…³é”®æµç¨‹

**æ–‡æ¡£å±‚é¢**:
- [ ] âœ… æŠ€æœ¯æ–¹æ¡ˆä¸å®ç°ä¸€è‡´
- [ ] âœ… å¤æ‚é€»è¾‘æœ‰æ³¨é‡Š
- [ ] âœ… APIæ–‡æ¡£å·²æ›´æ–°
- [ ] âœ… CHANGELOGå·²æ›´æ–°

#### å®¡æŸ¥åé¦ˆæ¨¡æ¿

```markdown
## ğŸ” ä»£ç å®¡æŸ¥åé¦ˆ

### ğŸ”´ Must Fix (é˜»æ–­åˆå¹¶)
- [ ] [æ–‡ä»¶å:è¡Œå·] å­˜åœ¨SQLæ³¨å…¥é£é™©ï¼Œå¿…é¡»ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- [ ] [æ–‡ä»¶å:è¡Œå·] æµ‹è¯•è¦†ç›–ç‡ä»…45%ï¼Œä½äºé˜ˆå€¼60%

### ğŸŸ¡ Should Fix (å¼ºçƒˆå»ºè®®)
- [ ] [æ–‡ä»¶å:è¡Œå·] è¯¥å‡½æ•°æœ‰120è¡Œï¼Œå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå°å‡½æ•°
- [ ] [æ–‡ä»¶å:è¡Œå·] å­˜åœ¨é‡å¤ä»£ç ï¼Œå»ºè®®æå–å…¬å…±å‡½æ•°

### ğŸŸ¢ Nice to Have (å¯é€‰)
- [ ] [æ–‡ä»¶å:è¡Œå·] å˜é‡å‘½åå¯ä»¥æ›´æ¸…æ™°ï¼Œå¦‚ `data` â†’ `userProfile`
- [ ] [æ–‡ä»¶å:è¡Œå·] å¯ä»¥æ·»åŠ æ³¨é‡Šè§£é‡Šè¿™æ®µç®—æ³•çš„æ€è·¯

### âœ… Good Points (å€¼å¾—å­¦ä¹ )
- âœ¨ å•å…ƒæµ‹è¯•å†™å¾—å¾ˆå®Œæ•´ï¼Œè¾¹ç•Œæ¡ä»¶éƒ½è¦†ç›–åˆ°äº†
- âœ¨ å¼‚å¸¸å¤„ç†å¾ˆè§„èŒƒï¼Œé”™è¯¯ä¿¡æ¯æ¸…æ™°

### ğŸ“Š è´¨é‡æŒ‡æ ‡
- æµ‹è¯•è¦†ç›–ç‡: 85% âœ…
- ä»£ç é‡å¤ç‡: 3% âœ…
- å¹³å‡åœˆå¤æ‚åº¦: 7 âœ…
- æŠ€æœ¯å€ºåŠ¡: 0åˆ†é’Ÿ âœ…
```

#### é—¨ç¦è§„åˆ™
- å­˜åœ¨ä»»ä½•ğŸ”´ Must Fix â†’ âŒ é˜»æ–­åˆå¹¶
- è‡³å°‘1ä½Revieweræ‰¹å‡† â†’ âœ… å…è®¸åˆå¹¶

---

### é—¨ç¦4: åˆå¹¶å‰é˜¶æ®µ

#### è§¦å‘æ—¶æœº
- PRå‡†å¤‡åˆå¹¶æ—¶
- ç‚¹å‡»"Merge"æŒ‰é’®å‰

#### æœ€ç»ˆæ£€æŸ¥æ¸…å•
```markdown
## åˆå¹¶å‰ç»ˆææ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡
- [ ] âœ… æ‰€æœ‰CIæ£€æŸ¥é€šè¿‡
- [ ] âœ… æ‰€æœ‰ä»£ç å®¡æŸ¥æ„è§å·²è§£å†³
- [ ] âœ… æ— mergeå†²çª
- [ ] âœ… åˆ†æ”¯ä¸ä¸»åˆ†æ”¯åŒæ­¥

### æµ‹è¯•
- [ ] âœ… å•å…ƒæµ‹è¯•é€šè¿‡ (è¦†ç›–ç‡â‰¥80%)
- [ ] âœ… é›†æˆæµ‹è¯•é€šè¿‡
- [ ] âœ… E2Eæµ‹è¯•é€šè¿‡ (å¦‚é€‚ç”¨)
- [ ] âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡ (å¦‚é€‚ç”¨)

### æ–‡æ¡£
- [ ] âœ… æ–‡æ¡£å·²æ›´æ–°
- [ ] âœ… CHANGELOGå·²æ›´æ–°
- [ ] âœ… åŠŸèƒ½æ¸…å•çŠ¶æ€å·²æ›´æ–°

### éƒ¨ç½²å‡†å¤‡
- [ ] âœ… æ•°æ®åº“è¿ç§»è„šæœ¬å·²å‡†å¤‡ (å¦‚é€‚ç”¨)
- [ ] âœ… é…ç½®é¡¹å·²åŒæ­¥åˆ°ç¯å¢ƒ (å¦‚é€‚ç”¨)
- [ ] âœ… åŠŸèƒ½å¼€å…³å·²é…ç½® (å¦‚é€‚ç”¨)

### é£é™©è¯„ä¼°
- [ ] âœ… å›æ»šæ–¹æ¡ˆå·²å‡†å¤‡
- [ ] âœ… ç›‘æ§å‘Šè­¦å·²é…ç½®
- [ ] âœ… ä¾èµ–æœåŠ¡å¯ç”¨æ€§å·²ç¡®è®¤
```

#### é—¨ç¦è§„åˆ™
- ä»»ä¸€é¡¹æœªé€šè¿‡ â†’ âŒ é˜»æ–­åˆå¹¶

---

### é—¨ç¦5: éƒ¨ç½²å‰é˜¶æ®µ

#### è§¦å‘æ—¶æœº
- å‡†å¤‡å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒå‰

#### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•
```markdown
## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ£€æŸ¥æ¸…å•

### ä»£ç æ£€æŸ¥
- [ ] âœ… æ‰€æœ‰PRå·²åˆå¹¶
- [ ] âœ… ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] âœ… Git tagå·²åˆ›å»º
- [ ] âœ… Release noteså·²å‡†å¤‡

### ç¯å¢ƒæ£€æŸ¥
- [ ] âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®æ­£ç¡®
- [ ] âœ… ç¯å¢ƒå˜é‡å·²åŒæ­¥
- [ ] âœ… å¯†é’¥å·²è½®æ¢ (å¦‚éœ€è¦)
- [ ] âœ… æ•°æ®åº“å¤‡ä»½å·²å®Œæˆ

### ä¾èµ–æ£€æŸ¥
- [ ] âœ… ä¾èµ–æœåŠ¡å¥åº·
- [ ] âœ… ç¬¬ä¸‰æ–¹APIå¯ç”¨
- [ ] âœ… CDNèµ„æºå¯è®¿é—®

### ç›‘æ§æ£€æŸ¥
- [ ] âœ… æ—¥å¿—æ”¶é›†æ­£å¸¸
- [ ] âœ… ç›‘æ§æŒ‡æ ‡æ­£å¸¸
- [ ] âœ… å‘Šè­¦è§„åˆ™å·²é…ç½®
- [ ] âœ… On-calläººå‘˜å·²å°±ç»ª

### å›æ»šå‡†å¤‡
- [ ] âœ… å›æ»šè„šæœ¬å·²æµ‹è¯•
- [ ] âœ… æ•°æ®åº“å›æ»šè„šæœ¬å·²å‡†å¤‡
- [ ] âœ… å›æ»šSOPå·²ç¡®è®¤

### å‘å¸ƒè®¡åˆ’
- [ ] âœ… å‘å¸ƒæ—¶é—´å·²ç¡®å®š
- [ ] âœ… å‘å¸ƒé€šçŸ¥å·²å‘é€
- [ ] âœ… ç°åº¦ç­–ç•¥å·²ç¡®å®š
- [ ] âœ… è§‚å¯ŸæŒ‡æ ‡å·²æ˜ç¡®
```

#### é—¨ç¦è§„åˆ™
- ä»»ä¸€å…³é”®é¡¹æœªé€šè¿‡ â†’ âŒ é˜»æ–­å‘å¸ƒ
- å…³é”®é¡¹åŒ…æ‹¬ï¼šç¯å¢ƒé…ç½®ã€æ•°æ®åº“å¤‡ä»½ã€å›æ»šå‡†å¤‡

---

### é—¨ç¦6: å‘å¸ƒåé˜¶æ®µ

#### è§¦å‘æ—¶æœº
- å‘å¸ƒå®Œæˆå
- æŒç»­è§‚å¯ŸæœŸ (1-24å°æ—¶)

#### å‘å¸ƒåè§‚å¯Ÿæ¸…å•
```markdown
## ç”Ÿäº§ç¯å¢ƒå¥åº·æ£€æŸ¥

### ç«‹å³æ£€æŸ¥ (å‘å¸ƒå5åˆ†é’Ÿ)
- [ ] âœ… æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹æ­£å¸¸
- [ ] âœ… å†’çƒŸæµ‹è¯•é€šè¿‡
- [ ] âœ… æ— æ˜æ˜¾é”™è¯¯æ—¥å¿—

### çŸ­æœŸè§‚å¯Ÿ (å‘å¸ƒå1å°æ—¶)
- [ ] âœ… é”™è¯¯ç‡ <1%
- [ ] âœ… å“åº”æ—¶é—´æ­£å¸¸ (<500ms P95)
- [ ] âœ… CPUä½¿ç”¨ç‡æ­£å¸¸ (<70%)
- [ ] âœ… å†…å­˜ä½¿ç”¨ç‡æ­£å¸¸ (<80%)
- [ ] âœ… æ•°æ®åº“è¿æ¥æ± æ­£å¸¸

### ä¸­æœŸè§‚å¯Ÿ (å‘å¸ƒå4å°æ—¶)
- [ ] âœ… ä¸šåŠ¡æŒ‡æ ‡æ­£å¸¸
- [ ] âœ… æ— ç”¨æˆ·æŠ•è¯‰
- [ ] âœ… æ ¸å¿ƒæµç¨‹è½¬åŒ–ç‡æ­£å¸¸

### é•¿æœŸè§‚å¯Ÿ (å‘å¸ƒå24å°æ—¶)
- [ ] âœ… æ— å¼‚å¸¸è¶‹åŠ¿
- [ ] âœ… æ‰€æœ‰å‘Šè­¦å·²å¤„ç†
- [ ] âœ… æ€§èƒ½åŸºçº¿ç¨³å®š
```

#### é—¨ç¦è§„åˆ™
| æ—¶é—´ç‚¹ | å¼‚å¸¸æƒ…å†µ | å¤„ç†æ–¹å¼ |
|--------|---------|---------|
| 5åˆ†é’Ÿå†… | æœåŠ¡æ— æ³•å¯åŠ¨ | âŒ ç«‹å³å›æ»š |
| 1å°æ—¶å†… | é”™è¯¯ç‡>5% | âŒ ç«‹å³å›æ»š |
| 1å°æ—¶å†… | å“åº”æ—¶é—´>1s (P95) | âš ï¸ è¯„ä¼°æ˜¯å¦å›æ»š |
| 4å°æ—¶å†… | æ ¸å¿ƒæµç¨‹è½¬åŒ–ç‡ä¸‹é™>10% | âš ï¸ è¯„ä¼°æ˜¯å¦å›æ»š |
| 24å°æ—¶å†… | ç›‘æ§æŒ‡æ ‡æŒç»­å¼‚å¸¸ | âš ï¸ åˆ†æåŸå› ï¼Œå¿…è¦æ—¶å›æ»š |

---

## ğŸ› ï¸ è´¨é‡å·¥å…·é…ç½®

### ESLinté…ç½® (ä»£ç é£æ ¼)
```javascript
// .eslintrc.js
module.exports = {
  extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended'],
  rules: {
    // åœˆå¤æ‚åº¦é™åˆ¶
    'complexity': ['error', 10],

    // å‡½æ•°æœ€å¤§è¡Œæ•°
    'max-lines-per-function': ['warn', 50],

    // æ–‡ä»¶æœ€å¤§è¡Œæ•°
    'max-lines': ['warn', 300],

    // åµŒå¥—å±‚çº§é™åˆ¶
    'max-depth': ['error', 3],

    // ç¦æ­¢console
    'no-console': 'warn',

    // ç¦æ­¢debugger
    'no-debugger': 'error',

    // ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
    'no-unused-vars': 'error',

    // è¦æ±‚ä½¿ç”¨const
    'prefer-const': 'error',
  },
};
```

### Jesté…ç½® (æµ‹è¯•è¦†ç›–ç‡)
```javascript
// jest.config.js
module.exports = {
  collectCoverage: true,
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],

  // è¦†ç›–ç‡é˜ˆå€¼
  coverageThreshold: {
    global: {
      branches: 70,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },

  // æ’é™¤çš„æ–‡ä»¶
  coveragePathIgnorePatterns: [
    '/node_modules/',
    '/tests/',
    '/.*.test.ts$/',
  ],
};
```

### SonarQubeé…ç½® (ä»£ç è´¨é‡)
```properties
# sonar-project.properties

sonar.projectKey=vibe-project
sonar.projectName=Vibe Project
sonar.projectVersion=1.0

# æºç è·¯å¾„
sonar.sources=src
sonar.tests=tests

# æ’é™¤è·¯å¾„
sonar.exclusions=**/node_modules/**,**/dist/**,**/*.spec.ts

# è¦†ç›–ç‡æŠ¥å‘Š
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# è´¨é‡é—¨ç¦
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# ä»£ç è§„åˆ™
sonar.issue.ignore.multicriteria=e1,e2

# å¿½ç•¥è§„åˆ™: ç¦æ­¢TODO
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.ts

# å¿½ç•¥è§„åˆ™: ç¦æ­¢console.log (å·²ç”±ESLintå¤„ç†)
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S2228
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.ts
```

### Huskyé…ç½® (Git Hooks)
```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm run pre-commit-check",
      "pre-push": "npm run pre-push-check",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "scripts": {
    "pre-commit-check": "npm run lint && npm run type-check",
    "pre-push-check": "npm run test:unit && npm run test:coverage"
  }
}
```

### Commitlinté…ç½® (æäº¤ä¿¡æ¯è§„èŒƒ)
```javascript
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',     // æ–°åŠŸèƒ½
        'fix',      // Bugä¿®å¤
        'docs',     // æ–‡æ¡£å˜æ›´
        'style',    // ä»£ç æ ¼å¼
        'refactor', // é‡æ„
        'perf',     // æ€§èƒ½ä¼˜åŒ–
        'test',     // æµ‹è¯•
        'chore',    // æ„å»º/å·¥å…·
        'revert',   // å›é€€
      ],
    ],
    'subject-case': [0],  // subjectä¸é™åˆ¶å¤§å°å†™
    'subject-max-length': [2, 'always', 100],
  },
};
```

---

## ğŸ“Š è´¨é‡ç›‘æ§ä»ªè¡¨æ¿

### ä»ªè¡¨æ¿æŒ‡æ ‡

```markdown
# Vibe è´¨é‡å¥åº·åº¦ä»ªè¡¨æ¿

## ä»£ç è´¨é‡
| æŒ‡æ ‡ | å½“å‰å€¼ | è¶‹åŠ¿ | çŠ¶æ€ |
|------|--------|------|------|
| æµ‹è¯•è¦†ç›–ç‡ | 85% | â†—ï¸ +2% | âœ… ä¼˜ç§€ |
| ä»£ç é‡å¤ç‡ | 4% | â†’ | âœ… è‰¯å¥½ |
| æŠ€æœ¯å€ºåŠ¡ | 2å°æ—¶ | â†˜ï¸ -1h | âœ… ä¼˜ç§€ |
| å¹³å‡åœˆå¤æ‚åº¦ | 6.5 | â†˜ï¸ -0.5 | âœ… ä¼˜ç§€ |
| ä»£ç å¼‚å‘³ | 12ä¸ª | â†—ï¸ +3 | âš ï¸ å…³æ³¨ |

## å®‰å…¨æŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰å€¼ | çŠ¶æ€ |
|------|--------|------|
| é«˜å±æ¼æ´ | 0 | âœ… å®‰å…¨ |
| ä¸­å±æ¼æ´ | 2 | âš ï¸ å…³æ³¨ |
| ä½å±æ¼æ´ | 8 | ğŸŸ¢ å¯æ¥å— |
| ä¾èµ–è¿‡æœŸç‡ | 15% | âš ï¸ éœ€æ›´æ–° |

## æ€§èƒ½æŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡ | çŠ¶æ€ |
|------|--------|------|------|
| API P50å“åº”æ—¶é—´ | 120ms | <200ms | âœ… ä¼˜ç§€ |
| API P95å“åº”æ—¶é—´ | 380ms | <500ms | âœ… è‰¯å¥½ |
| é¦–å±åŠ è½½æ—¶é—´ | 1.8s | <2s | âœ… è‰¯å¥½ |
| åŒ…ä½“ç§¯ | 450KB | <500KB | âœ… è‰¯å¥½ |

## æµ‹è¯•æŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰å€¼ | è¶‹åŠ¿ |
|------|--------|------|
| å•å…ƒæµ‹è¯•æ•°é‡ | 432 | â†—ï¸ +15 |
| é›†æˆæµ‹è¯•æ•°é‡ | 58 | â†’ |
| E2Eæµ‹è¯•æ•°é‡ | 12 | â†—ï¸ +2 |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´ | 3m 45s | â†—ï¸ +20s |

## æµç¨‹æŒ‡æ ‡
| æŒ‡æ ‡ | å½“å‰å€¼ | è¶‹åŠ¿ |
|------|--------|------|
| PRå¹³å‡Reviewæ—¶é—´ | 4å°æ—¶ | â†˜ï¸ -1h |
| PRå¹³å‡åˆå¹¶æ—¶é—´ | 1.2å¤© | â†’ |
| CIé€šè¿‡ç‡ | 92% | â†—ï¸ +3% |
| éƒ¨ç½²é¢‘ç‡ | 3æ¬¡/å‘¨ | â†—ï¸ |
| å‘å¸ƒå¤±è´¥ç‡ | 2% | â†˜ï¸ -1% |
```

---

## ğŸ“ è´¨é‡æ–‡åŒ–å»ºè®¾

### 1. è´¨é‡æ„è¯†åŸ¹å…»
- **å®šæœŸCode Reviewåˆ†äº«**: æ¯å‘¨åˆ†äº«ä¼˜ç§€/ç³Ÿç³•ä»£ç æ¡ˆä¾‹
- **è´¨é‡æœˆä¼š**: æ¯æœˆå›é¡¾è´¨é‡æŒ‡æ ‡ï¼Œè¡¨å½°è´¨é‡æ ‡å…µ
- **æŠ€æœ¯å€ºåŠ¡å¿è¿˜æ—¥**: æ¯æœˆå›ºå®š1å¤©ä¸“é—¨å¿è¿˜æŠ€æœ¯å€º

### 2. æ¿€åŠ±æœºåˆ¶
- **è´¨é‡æ ‡å…µ**: æœˆåº¦ä»£ç è´¨é‡æœ€é«˜è€…
- **BugçŒäºº**: æœˆåº¦å‘ç°Bugæœ€å¤šè€…
- **æµ‹è¯•å† å†›**: æœˆåº¦æµ‹è¯•è¦†ç›–ç‡æå‡æœ€å¤šè€…

### 3. æŒç»­æ”¹è¿›
- **è´¨é‡å›é¡¾ä¼š**: æ¯æ¬¡å‘å¸ƒåè¿›è¡Œè´¨é‡å¤ç›˜
- **å·¥å…·ä¼˜åŒ–**: æ ¹æ®å›¢é˜Ÿåé¦ˆæŒç»­ä¼˜åŒ–æ£€æŸ¥å·¥å…·
- **æ ‡å‡†æ¼”è¿›**: å®šæœŸreviewå¹¶æ›´æ–°è´¨é‡æ ‡å‡†

---

## ğŸš« å¸¸è§é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ

### é™·é˜±1: è¿‡åº¦ä¾èµ–è‡ªåŠ¨åŒ–å·¥å…·
**é—®é¢˜**: è®¤ä¸ºæœ‰äº†å·¥å…·å°±ä¸‡äº‹å¤§å‰ï¼Œå¿½ç•¥äººå·¥Review
**è§£å†³**: è‡ªåŠ¨åŒ–è´Ÿè´£åŸºç¡€æ£€æŸ¥ï¼Œäººå·¥è´Ÿè´£æ¶æ„å’Œä¸šåŠ¡é€»è¾‘å®¡æŸ¥

### é™·é˜±2: è´¨é‡æ ‡å‡†ä¸€æˆä¸å˜
**é—®é¢˜**: åˆæœŸæ ‡å‡†å¤ªä¸¥æˆ–å¤ªæ¾ï¼ŒåæœŸä¸è°ƒæ•´
**è§£å†³**: é‡‡ç”¨æ¸è¿›å¼æ ‡å‡†ï¼Œå®šæœŸreviewå¹¶è°ƒæ•´

### é™·é˜±3: ä¸ºäº†è¦†ç›–ç‡è€Œæµ‹è¯•
**é—®é¢˜**: å†™æ— æ„ä¹‰çš„æµ‹è¯•åªä¸ºæé«˜è¦†ç›–ç‡æ•°å­—
**è§£å†³**: å…³æ³¨æµ‹è¯•è´¨é‡ï¼Œè€Œéä»…ä»…æ•°å­—

### é™·é˜±4: è´¨é‡é—¨ç¦å¤ªå¤šå¤ªæ…¢
**é—®é¢˜**: æ¯æ¬¡æäº¤ç­‰å¾…å‡ ååˆ†é’ŸCI
**è§£å†³**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œé€Ÿåº¦ï¼Œå¹¶è¡Œè¿è¡Œæ£€æŸ¥é¡¹

### é™·é˜±5: å¿½ç•¥æ€§èƒ½æµ‹è¯•
**é—®é¢˜**: åªå…³æ³¨åŠŸèƒ½æ­£ç¡®æ€§ï¼Œå¿½ç•¥æ€§èƒ½
**è§£å†³**: å…³é”®æ¥å£å¿…é¡»æœ‰æ€§èƒ½æµ‹è¯•ï¼Œè®¾ç½®æ€§èƒ½åŸºçº¿

---

## ğŸ“š å‚è€ƒèµ„æº

- [Googleå·¥ç¨‹å®è·µæ–‡æ¡£](https://google.github.io/eng-practices/)
- [SonarQubeè´¨é‡é—¨ç¦é…ç½®](https://docs.sonarqube.org/latest/user-guide/quality-gates/)
- [æµ‹è¯•é‡‘å­—å¡”æœ€ä½³å®è·µ](https://martinfowler.com/articles/practical-test-pyramid.html)
- [ä»£ç å®¡æŸ¥æœ€ä½³å®è·µ](https://github.com/thoughtbot/guides/tree/main/code-review)
